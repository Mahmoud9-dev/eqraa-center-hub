# خارطة طريق المنتج: مركز إقرا الإسلامي المحدث

## 1. الرؤية والمكدس التقني

- **المشكلة:** إدارة شاملة لمركز قرآني تتضمن إدارة الطلاب، المشايخ، الجلسات، الحضور، الامتحانات، والمحتوى التعليمي
- **الحل المقترح:** نظام ويب متكامل بواجهة بسيطة تعتمد على الأيقونات مع تنظيم هرمي للمحتوى
- **المكدس التقني:** React + TypeScript + Tailwind CSS + Supabase
- **القيود المطبقة والتفضيلات:** عدم استخدام Node.js، البساطة في التصميم، تجنب التعقيدات

## 2. المتطلبات الأساسية (من تحليل المتطلبات)

### متطلبات عرض البيانات:

- عرض بيانات الطالب الكاملة (اسم، عمر، مرحلة دراسية، قسم)
- تصنيف الطلاب حسب الأقسام (قرآن، تجويد، تربوي)
- عرض المشايخ المتخصصين لكل قسم
- تتبع التقدم الحالي والسابق للطالب

### متطلبات الجلسات والتقييم:

- تنظيم الجلسات الزمنية (ماضي قريب، ماضي بعيد، جديد)
- تسجيل الآيات المحفوظة تلقائياً
- تقييم الأداء لكل جلسة
- تسجيل صوتي للجلسات

### متطلبات الحضور والانصراف:

- نظام حضور وانصراف للطلاب
- نظام حضور وانصراف للمشايخ
- ربط الحضور بالجداول الزمنية

### متطلبات الامتحانات:

- امتحانات منفصلة لكل مادة (قرآن، تجويد، تربوي)
- تقييم شامل لكل طالب
- إحصائيات التقدم

### متطلبات المحتوى التعليمي:

- دروس شرعية شاملة (عقيدة، فقه، سيرة، تفسير، حديث)
- مكتبة علمية (كتب PDF، مقاطع صوتية)
- جدول دراسي متكامل
- إعلانات وتنبيهات

### متطلبات الصلاحيات:

- صلاحيات متعددة (طالب، مدرس، مشرف، إدارة)
- كل فئة ترى ما يخصها فقط

## 3. الوحدات الوظيفية المرتبة (Prioritized Functional Modules)

| الأولوية | الوحدة الوظيفية (Module)            | الأساس المنطقي (من البحث) | الوصف (يشمل الميزات المجمعة)                                                |
| :------- | :---------------------------------- | :------------------------ | :-------------------------------------------------------------------------- |
| 1        | **الهيكل الأساسي والقاعدة المحدثة** | أساس النظام               | تحديث قاعدة البيانات، إضافة الجداول الجديدة، تصميم الواجهة الرئيسية المحدثة |
| 2        | **الإدارة المحسنة**                 | إدارة البيانات الأساسية   | عرض الطلاب مع المرحلة الدراسية، تصنيف حسب الأقسام، إدارة المشايخ المتخصصين  |
| 3        | **القرآن المنظم**                   | المحتوى الأساسي           | قائمة المشايخ، جلسات منظمة زمنياً، تتبع الأجزاء المحفوظة تلقائياً           |
| 4        | **الحضور والانصراف**                | المتابعة اليومية          | نظام حضور للطلاب والمشايخ، تقارير الحضور، ربط بالجداول                      |
| 5        | **الامتحانات والتقييم**             | التقييم الشامل            | امتحانات لكل مادة، تقييم الأداء، إحصائيات التقدم                            |
| 6        | **الدروس الشرعية**                  | المحتوى التعليمي          | مواد دراسية شاملة، فيديو/صوت/PDF، واجبات واختبارات                          |
| 7        | **الجدول الدراسي**                  | التنظيم الزمني            | جداول الحلقات اليومية/الأسبوعية، إشعارات قبل الحلقات                        |
| 8        | **المكتبة العلمية**                 | المراجع والمصادر          | كتب PDF، مقاطع صوتية، روابط موثوقة، فهرس بحث                                |
| 9        | **الإعلانات والتنبيهات**            | التواصل                   | إعلانات عامة، تنبيهات من الإدارة، إشعارات بالجداول                          |
| 10       | **نظام الصلاحيات**                  | الأمان والتنظيم           | صلاحيات متعددة، واجهات مخصصة لكل فئة                                        |
| 11       | **التحسينات النهائية**              | الجودة                    | تصحيح التاريخ، تحسين الأداء، الاختبار الشامل                                |

## 4. هيكل الواجهة الرئيسية المحدث

```
┌─────────────────────────────────────────┐
│              مركز إقرا                 │
├─────────────────────────────────────────┤
│                                         │
│  [الإدارة]  [القرآن]  [التجويد]        │
│                                         │
│  [التربوي]  [الحضور]  [الامتحانات]     │
│                                         │
│  [دروس شرعية]  [الجدول]  [المكتبة]     │
│                                         │
│  [الإعلانات]  [الإعدادات]              │
│                                         │
└─────────────────────────────────────────┘
```

## 5. نماذج البيانات المحدثة

### Student (الطالب) - محدث

```typescript
interface Student {
  id: string;
  name: string;
  age: number;
  grade: string; // "ابتدائي أول"، "ابتدائي ثاني"، etc.
  department: "quran" | "tajweed" | "tarbawi";
  partsMemorized: number;
  currentProgress: string;
  previousProgress: string;
  teacherId: string;
  attendanceRecord: AttendanceRecord[];
  examResults: ExamResult[];
  isActive: boolean;
  createdAt: Date;
}
```

### Teacher (الشيخ/المعلم) - محدث

```typescript
interface Teacher {
  id: string;
  name: string;
  specialization: string;
  department: "quran" | "tajweed" | "tarbawi" | "sharia";
  isActive: boolean;
  attendanceRecord: AttendanceRecord[];
  students: Student[];
  sessions: QuranSession[];
  createdAt: Date;
}
```

### QuranSession (جلسة القرآن) - محدث

```typescript
interface QuranSession {
  id: string;
  studentId: string;
  teacherId: string;
  date: Date;
  surahName: string;
  versesFrom: number;
  versesTo: number;
  performanceRating: number;
  notes?: string;
  audioRecording?: string;
  sessionType: "ماضي بعيد" | "ماضي قريب" | "جديد";
  createdAt: Date;
}
```

### جداول جديدة مطلوبة

### Attendance (الحضور والانصراف)

```typescript
interface Attendance {
  id: string;
  userId: string;
  userType: "student" | "teacher";
  date: Date;
  checkIn: Date;
  checkOut?: Date;
  status: "حاضر" | "غائب" | "متأخر";
  notes?: string;
}
```

### Exam (الامتحانات)

```typescript
interface Exam {
  id: string;
  title: string;
  subject: "قرآن" | "تجويد" | "تربوي";
  date: Date;
  maxScore: number;
  questions: ExamQuestion[];
  results: ExamResult[];
}
```

### EducationalContent (المحتوى التعليمي)

```typescript
interface EducationalContent {
  id: string;
  category: "عقيدة" | "فقه" | "سيرة" | "تفسير" | "حديث" | "تربية" | "لغة عربية";
  title: string;
  description: string;
  contentType: "فيديو" | "صوت" | "PDF" | "مقال";
  contentUrl: string;
  teacherId: string;
  createdAt: Date;
}
```

### Schedule (الجدول الدراسي)

```typescript
interface Schedule {
  id: string;
  title: string;
  description: string;
  startTime: Date;
  endTime: Date;
  recurring: "يومي" | "أسبوعي" | "شهري";
  participants: string[]; // IDs of students/teachers
  notifications: boolean;
  createdAt: Date;
}
```

### User (المستخدمون والصلاحيات)

```typescript
interface User {
  id: string;
  name: string;
  email: string;
  role: "طالب" | "مدرس" | "مشرف" | "إدارة";
  permissions: Permission[];
  isActive: boolean;
  createdAt: Date;
}
```

## 6. خارطة التنفيذ التفصيلية

### المرحلة 1: الأساس المحدث (أسبوع)

- [ ] تحديث قاعدة البيانات بالجداول الجديدة
- [ ] تصميم الواجهة الرئيسية المحدثة
- [ ] إنشاء نظام الصلاحيات الأساسي
- [ ] تحديث نماذج البيانات في TypeScript

### المرحلة 2: الإدارة والقرآن (أسبوع)

- [ ] تحسين قسم الإدارة مع عرض المرحلة الدراسية
- [ ] تطوير قسم القرآن مع قائمة المشايخ
- [ ] تنظيم الجلسات زمنياً (ماضي قريب/بعيد/جديد)
- [ ] تحديث الأجزاء المحفوظة تلقائياً

### المرحلة 3: الحضور والامتحانات (أسبوع)

- [ ] تطوير نظام الحضور والانصراف
- [ ] إنشاء نظام الامتحانات لكل مادة
- [ ] ربط الحضور بالجداول الزمنية
- [ ] تقارير الحضور والتقييم

### المرحلة 4: المحتوى التعليمي (أسبوع)

- [ ] تطوير الدروس الشرعية الشاملة
- [ ] إنشاء المكتبة العلمية
- [ ] تطوير الجدول الدراسي المتكامل
- [ ] نظام الإعلانات والتنبيهات

### المرحلة 5: التحسينات والنشر (أسبوع)

- [ ] تصحيح مشاكل عرض التاريخ
- [ ] تحسين الأداء والسرعة
- [ ] الاختبار الشامل للنظام
- [ ] النشر والتحسينات النهائية

## 7. معايير النجاح

### معايير الوظائف:

- [ ] عرض صحيح لبيانات الطلاب مع المرحلة الدراسية
- [ ] تصنيف الطلاب حسب الأقسام يعمل بشكل صحيح
- [ ] الجلسات منظمة زمنياً بشكل صحيح
- [ ] نظام الحضور والانصراف يعمل بكفاءة
- [ ] الامتحانات والتقييم تعمل لكل مادة
- [ ] الصلاحيات المختلفة تعمل بشكل صحيح

### معايير الأداء:

- [ ] سرعة تحميل الصفحات < 2 ثانية
- [ ] البحث في قائمة الطلاب < 500ms
- [ ] نظام يعمل بكفاءة مع 100+ طالب
- [ ] واجهة مستخدم بسيطة ومألوفة

## 8. المخاطر والتحديات

### المخاطر التقنية:

- تعقيد ربط الجداول الجديدة بالنظام الحالي
- أداء النظام مع زيادة عدد المستخدمين
- ضمان أمان البيانات مع الصلاحيات المتعددة

### التحديات:

- الحفاظ على بساطة الواجهة مع زيادة الميزات
- ضمان تجربة مستخدم سلسة مع الصلاحيات المختلفة
- إدارة المحتوى التعليمي الضخم بكفاءة

## 9. الملخص

هذه الخطة المحدثة تركز على:

- **الشمولية:** تغطية جميع جوانب إدارة المركز القرآني
- **التنظيم:** هيكل هرمي واضح للمحتوى والصلاحيات
- **البساطة:** الحفاظ على واجهة بسيطة رغم زيادة الميزات
- **المرونة:** قابلية التطوير والتخصيص حسب الحاجة
- **الكفاءة:** أداء جيد حتى مع عدد كبير من المستخدمين

الخطة جاهزة للتنفيذ وفقاً لبروتوكول ترس الشفرة-1، وحدة تلو الأخرى.
